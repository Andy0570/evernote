Tipsï¼šç®€åŒ–å±æ€§è¯­æ³•ã€å¯è®¡ç®—å±æ€§åã€ç®€åŒ–å¯¹è±¡æ–¹æ³•è¯­æ³•ã€é‡å¤å±æ€§åæ ¡éªŒã€`Object.is()`ã€`Object.assign()`ã€è‡ªæœ‰å±æ€§æšä¸¾ã€`Object.setPrototypeOf()`ã€`super`ã€

## å¯¹è±¡å­—é¢é‡è¯­æ³•æ‰©å±•

### å±æ€§åˆå§‹å€¼çš„ç®€å†™

```javascript
// createPerson() å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§åç§°ä¸å‡½æ•°çš„å‚æ•°åç§°ç›¸åŒ
function createPerson(name, age) {
  return {
    name: name,
    age: age
  };
}

// åœ¨ ES6 ä¸­ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ä¸æœ¬åœ°å˜é‡åŒåæ—¶ï¼Œä¸å¿…å†å†™å†’å·å’Œå€¼ï¼Œç®€å•åœ°åªå†™å±æ€§åå³å¯
function createPerson(name, age) {
  return {
    name,
    age
  };
}
```

### å¯¹è±¡æ–¹æ³•çš„ç®€å†™

```javascript
// ä¸ºå¯¹è±¡æ·»åŠ æ–¹æ³•æ—¶ï¼Œéœ€è¦æŒ‡å®šåç§°å¹¶å®Œæ•´å®šä¹‰å‡½æ•°æ¥å®ç°
var perosn = {
  name: "Andy",
  sayName: function () {
    console.log(this.name);
  }
}

// åœ¨ ES6 ä¸­ï¼Œæ¶ˆé™¤äº†å†’å·å’Œ function å…³é”®å­—
// åœ¨ person å¯¹è±¡ä¸­åˆ›å»ºäº†ä¸€ä¸ª sayName() æ–¹æ³•
var perosn = {
  name: "Andy",
  sayName() {
    console.log(this.name);
  }
}
```

### å¯è®¡ç®—å±æ€§å

```javascript
// å¦‚æœæƒ³è¦é€šè¿‡è®¡ç®—å¾—åˆ°å±æ€§åï¼Œéœ€è¦ç”¨æ–¹æ‹¬å·ä»£æ›¿ç‚¹è¯­æ³•
var person = {
  // åœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ä½œä¸ºå±æ€§åç§°
  'first name': 'Nicholas'
};

// å±æ€§åç§°ä¸­å¸¦æœ‰ç©ºæ ¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨æ–¹æ‹¬å·
person['first name'] = 'Andy';
var lastName = 'last name';
person[lastName] = 'Zakas';

console.log(person['first name']); // Andy
console.log(person[lastName]); // Zakas

// åœ¨ ES6 ä¸­ï¼Œå¯ä»¥åœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨å¯è®¡ç®—å±æ€§å
// ç¤ºä¾‹ä¸€ï¼š
let lastName = 'last name';

let person = {
  'first name': 'Nicholas',
  [lastName]: 'Zakas'
};

console.log(person['first name']); // Nicholas
console.log(person[lastName]); // Zakas

// ç¤ºä¾‹äºŒï¼š
var suffix = ' name';

// ä½¿ç”¨ [] è¡¨ç¤ºçš„å±æ€§åç§°æ˜¯å¯è®¡ç®—çš„
let person = {
  ['first' + suffix]: 'Nicholas',
  ['last' + suffix]: 'Zakas'
};

console.log(person['first name']); // Nicholas
console.log(person[lastName]); // Zakas
```

## æ–°å¢æ–¹æ³•


### `Object.is()` æ–¹æ³•

`Object.is()` æ–¹æ³•ç”¨æ¥å¼¥è¡¥å…¨ç­‰è¿ç®—ç¬¦çš„ä¸å‡†ç¡®è¿ç®—ã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœè¿™ä¸¤ä¸ªå‚æ•°ç±»å‹ç›¸åŒä¸”å…·æœ‰ç›¸åŒçš„å€¼ï¼Œåˆ™è¿”å› `true`ã€‚

```javascript
console.log(+0 == -0);          // true
console.log(+0 === -0);         // true
console.log(Object.is(+0, -0)); // false ğŸ’¡

console.log(NaN == NaN);          // false
console.log(NaN === NaN);         // false
console.log(Object.is(NaN, NaN)); // true ğŸ’¡

console.log(5 == 5);          // true
console.log(5 === 5);         // true
console.log(Object.is(5, 5)); // true

console.log(5 == '5');          // true
console.log(5 === '5');         // false
console.log(Object.is(5, '5')); // false
```

### `Object.assign()` æ–¹æ³•

æ··åˆï¼ˆMixinï¼‰æ˜¯ JavaScript ä¸­å®ç°å¯¹è±¡ç»„åˆçš„æµè¡Œæ–¹å¼ã€‚

**`Object.assign()` æ–¹æ³•åŸç”Ÿå®ç°äº†å¾ˆå¤šç¬¬ä¸‰æ–¹åº“çš„æ··åˆï¼ˆMixinï¼‰æ–¹æ³•ã€‚**

**è®¿é—®å™¨å±æ€§ï¼š`Object.assign()` æ–¹æ³•ä¸èƒ½å°†æä¾›è€…çš„è®¿é—®å™¨å±æ€§ï¼ˆGetterï¼‰å¤åˆ¶åˆ°æ¥æ”¶å¯¹è±¡ä¸­ã€‚**


```javascript
// mixin() å‡½æ•°éå† supplier çš„è‡ªæœ‰å±æ€§å¹¶å¤åˆ¶åˆ° receiver ä¸­
// ç»“æœï¼šreceiver ä¸é€šè¿‡ç»§æ‰¿å°±å¯ä»¥è·å¾—æ–°å±æ€§
function mixin(receiver, supplier) {
  Object.keys(supplier).forEach(function(key) {
    receiver[key] = supplier[key];
  });
  return receiver;
}

function EventTarget() { /*... */ }
EventTarget.prototype = {
  constructor: EventTarget,
  emit: function() { /*... */ },
  on: function() { /*... */ }
};

/*
  é€šè¿‡è°ƒç”¨ mixin() æ–¹æ³•ï¼Œ
  myObject å¯ä»¥æ¥æ”¶ EventTarget.prototype å¯¹è±¡çš„æ‰€æœ‰è¡Œä¸ºï¼Œ
  ä»è€Œä½¿ myObject å¯ä»¥åˆ†åˆ«é€šè¿‡ emit() æ–¹æ³•å‘å¸ƒäº‹ä»¶æˆ–é€šè¿‡ on() æ–¹æ³•è®¢é˜…äº‹ä»¶ã€‚
*/
var myObject = {};
mixin(myObject, EventTarget.prototype);

myObject.emit('somethingChanged');
```

åœ¨ ES6 ä¸­ï¼Œé€šè¿‡æ·»åŠ  `Object.assign()` æ–¹æ³•å®ç°äº†ç›¸åŒçš„åŠŸèƒ½

```javascript
function EventTarget() { /*... */ }
EventTarget.prototype = {
  constructor: EventTarget,
  emit: function() { /*... */ },
  on: function() { /*... */ }
};

// åœ¨ ES6 ä¸­ï¼Œé€šè¿‡æ·»åŠ  Object.assign() æ–¹æ³•å®ç°äº†ç›¸åŒçš„åŠŸèƒ½
var myObject = {};
Object.assign(myObject, EventTarget.prototype);

myObject.emit('somethingChanged');
```

`Object.assign()` æ–¹æ³•å¯ä»¥æ¥å—ä»»æ„æ•°é‡çš„æºå¯¹è±¡ï¼Œå¹¶æŒ‰æŒ‡å®šçš„é¡ºåºå°†å±æ€§å¤åˆ¶åˆ°æ¥æ”¶å¯¹è±¡ä¸­ã€‚æ‰€ä»¥å¦‚æœå¤šä¸ªæºå¯¹è±¡å…·æœ‰åŒåå±æ€§ï¼Œåˆ™æ’ä½é åçš„æºå¯¹è±¡ä¼šè¦†ç›–æ’ä½é å‰çš„ã€‚
```JavaScript
var receiver = {};

Object.assign(
  receiver,
  {
    // æºå¯¹è±¡ 1
    type: 'js',
    name: 'file.js'
  },
  { 
    // æºå¯¹è±¡ 2ï¼Œåè€…åŒåå±æ€§ä¼šè¦†ç›–å‰è€…
    type: 'css'
  }
);

console.log(receiver.type); // css
console.log(receiver.name); // file.js
```


### é‡å¤çš„å¯¹è±¡å­—é¢é‡å±æ€§

ECMAScript 5 ä¸¥æ ¼æ¨¡å¼ä¸­åŠ å…¥äº†å¯¹è±¡å­—é¢é‡é‡å¤å±æ€§çš„æ ¡éªŒï¼Œå½“åŒæ—¶å­˜åœ¨å¤šä¸ªåŒåå±æ€§æ—¶ä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯ã€‚

åœ¨ ECMAScript 6 ä¸­ï¼Œé‡å¤å±æ€§æ£€æŸ¥è¢«ç§»é™¤äº†ï¼Œæ— è®ºæ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼è¿˜æ˜¯éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä»£ç ä¸å†æ£€æŸ¥é‡å¤å±æ€§ï¼Œå¯¹äºæ¯ä¸€ç»„é‡å¤å±æ€§ï¼Œéƒ½ä¼šé€‰å–æœ€åä¸€ä¸ªå–å€¼ï¼Œå°±åƒè¿™æ ·:

```javascript
'use strict';

var person = {
  name: 'Nicholas',
  name: 'Grey' // ES5 ä¸¥æ ¼æ¨¡å¼ä¼šæœ‰è¯­æ³•é”™è¯¯ï¼ŒES6 ä¸‹ä¸ä¼šã€‚
};

console.log(person.name); // Grey
```

### è‡ªæœ‰å±æ€§æšä¸¾é¡ºåº

ECMAScript 5 ä¸­æœªå®šä¹‰å¯¹è±¡å±æ€§çš„æšä¸¾é¡ºåºï¼Œç”± JavaScript å¼•æ“å‚å•†è‡ªè¡Œå†³å®šã€‚

ECMAScript 6 ä¸¥æ ¼è§„å®šäº†å¯¹è±¡çš„è‡ªæœ‰å±æ€§è¢«æšä¸¾æ—¶çš„è¿”å›é¡ºåºï¼Œè¿™ä¼šå½±å“åˆ° `Object. getownPropertyNames()` æ–¹æ³•åŠ `Reflect.ownKeys` è¿”å›å±æ€§çš„æ–¹å¼ï¼Œ`Object.assign()` æ–¹æ³•å¤„ç†å±æ€§çš„é¡ºåºä¹Ÿå°†éšä¹‹æ”¹å˜ã€‚

è‡ªæœ‰å±æ€§æšä¸¾é¡ºåºçš„åŸºæœ¬è§„åˆ™æ˜¯ï¼š

1. æ‰€æœ‰æ•°å­—é”®æŒ‰å‡åºæ’åºã€‚
2. æ‰€æœ‰å­—ç¬¦ä¸²é”®æŒ‰ç…§å®ƒä»¬è¢«åŠ å…¥å¯¹è±¡çš„é¡ºåºæ’åºã€‚
3. æ‰€æœ‰ `symbol` é”®æŒ‰ç…§å®ƒä»¬è¢«åŠ å…¥å¯¹è±¡çš„é¡ºåºæ’åºã€‚

```javascript
var obj = {
  a: 1,
  0: 1,
  c: 1,
  2: 1,
  b: 1,
  1: 1
};

obj.d = 1;

console.log(Object.getOwnPropertyNames(obj).join('')); // 012acbd
```

## å¢å¼ºå¯¹è±¡åŸå‹

æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯é€šè¿‡æ„é€ å‡½æ•°è¿˜æ˜¯ `Object.create()` æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå…¶åŸå‹æ˜¯åœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶æŒ‡å®šçš„ã€‚å¯¹è±¡åŸå‹åœ¨å®ä¾‹åŒ–ä¹‹åä¿æŒä¸å˜ã€‚

è™½ç„¶åœ¨ ECMAScript 5 ä¸­æ·»åŠ äº† `Object.getPrototypeOf()` æ¥è¿”å›ä»»æ„å¯¹è±¡çš„åŸå‹ï¼Œä½†ä»ç„¶æ— æ³•åœ¨å¯¹è±¡è¢«å®ä¾‹åŒ–ä¹‹åæ”¹å˜å…¶åŸå‹ã€‚

ECMAScript 6 æ·»åŠ äº† `Object.setPrototypeOf()` æ–¹æ³•ï¼Œå¯ä»¥æ”¹å˜ä»»æ„æŒ‡å®šå¯¹è±¡çš„åŸå‹ã€‚

**å¯¹è±¡åŸå‹çš„çœŸå®å€¼è¢«å‚¨å­˜åœ¨å†…éƒ¨ä¸“ç”¨å±æ€§ `[[Prototype]]` ä¸­ï¼Œè°ƒç”¨ `object.getPrototypeof()` æ–¹æ³•è¿”å›å‚¨å­˜åœ¨å…¶ä¸­çš„å€¼ï¼Œè°ƒç”¨ `object.setPrototypeof()` æ–¹æ³•æ”¹å˜å…¶ä¸­çš„å€¼ã€‚**

```javascript
let person = {
  getGreeting() {
    return 'Hello';
  }
};

let dog = {
  getGreeting() {
    return 'Woof';
  }
};

// ä»¥ Person å¯¹è±¡ä¸ºåŸå‹
// friend -> person
let friend = Object.create(person);
console.log(friend.getGreeting()); // Hello
console.log(Object.getPrototypeOf(friend) === person); // true

// å°†åŸå‹è®¾ç½®ä¸º dog
// friend -> dog
Object.setPrototypeOf(friend, dog);
console.log(friend.getGreeting()); // Woof
console.log(Object.getPrototypeOf(friend) === person); // false
console.log(Object.getPrototypeOf(friend) === dog); // true
```

## ç®€åŒ–åŸå‹è®¿é—®çš„ `Super` å¼•ç”¨

ECMAScript 6 æ·»åŠ äº† `Super` å¼•ç”¨ç‰¹æ€§ï¼Œå¯ä»¥æ›´ä¾¿æ·åœ°è®¿é—®å¯¹è±¡åŸå‹ã€‚

å¿…é¡»åœ¨ä½¿ç”¨**ç®€å†™æ–¹æ³•**ï¼ˆå¯¹è±¡æ–¹æ³•çš„ç®€å†™ï¼‰çš„å¯¹è±¡ä¸­ä½¿ç”¨ `super` å¼•ç”¨ã€‚

`Super` å¼•ç”¨åœ¨å¤šé‡ç»§æ‰¿ä¸‹éå¸¸æœ‰ç”¨ã€‚

```javascript
let person = {
  getGreeting() {
    return 'Hello';
  }
};

let dog = {
  getGreeting() {
    return 'Woof';
  }
};

/*
 friend å¯¹è±¡çš„ getGreeting() æ–¹æ³•è°ƒç”¨äº†åŒåçš„åŸå‹æ–¹æ³•ã€‚
 Object.getPrototypeOf() æ–¹æ³•å¯ä»¥ç¡®ä¿è°ƒç”¨æ­£ç¡®çš„åŸå‹ã€‚
 call(this) å¯ä»¥ç¡®ä¿æ­£ç¡®è®¾ç½®åŸå‹æ–¹æ³•ä¸­çš„ this å€¼ã€‚
 */
let friend = {
  getGreeting() {
    return Object.getPrototypeOf(this).getGreeting.call(this) + ', hi!';
  }
};

// ä»¥ Person å¯¹è±¡ä¸ºåŸå‹
Object.setPrototypeOf(friend, person);
console.log(friend.getGreeting()); // Hello, hi!
console.log(Object.getPrototypeOf(friend) === person); // true

// å°†åŸå‹è®¾ç½®ä¸º dog
Object.setPrototypeOf(friend, dog);
console.log(friend.getGreeting()); // Woof, hi!
console.log(Object.getPrototypeOf(friend) === dog); // true
```

ES 6 ä¸­çš„ç®€åŒ–ï¼š

```javascript
let friend = {
  getGreeting() {
    // return Object.getPrototypeOf(this).getGreeting.call(this) + ', hi!';
    return super.getGreeting() + ', hi!';
  }
};
```


## æ­£å¼çš„æ–¹æ³•å®šä¹‰

åœ¨ ECMAScript 6 ä¸­æ­£å¼å°†â€œæ–¹æ³•â€å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šæœ‰ä¸€ä¸ªå†…éƒ¨çš„ `[[HomeObject]]` å±æ€§æ¥å®¹çº³è¿™ä¸ªæ–¹æ³•ä»å±çš„å¯¹è±¡ã€‚

```javascript
// person å¯¹è±¡æœ‰ä¸€ä¸ª getGreeting() æ–¹æ³•
// getGreeting() æ–¹æ³•çš„ [[HomeObject]] å±æ€§æŒ‡å‘ person
let person = {
  // æ˜¯æ–¹æ³•
  getGreeting() {
    return 'Hello';
  }
};

// ä¸æ˜¯æ–¹æ³•
function shareGreeting() {
  return 'Hello';
}
```

**`Super` çš„æ‰€æœ‰å¼•ç”¨éƒ½é€šè¿‡ `[[HomeObject]]` å±æ€§æ¥ç¡®å®šåç»­çš„è¿è¡Œè¿‡ç¨‹ã€‚**

```javascript
let person = {
  getGreeting() {
    return 'Hello';
  }
};

let friend = {
  getGreeting() {
    return super.getGreeting() + ', hi!';
  }
};

// ä»¥ Person å¯¹è±¡ä¸ºåŸå‹
Object.setPrototypeOf(friend, person);

/*
  è°ƒç”¨ friend.getGreeting() æ–¹æ³•ä¼šå°† person.getGreeting() çš„è¿”å›å€¼ä¸ ', hi!' å­—ç¬¦ä¸²æ‹¼æ¥å¹¶è¿”å›ã€‚

  friend.getGreeting() æ–¹æ³•çš„ [[HomeObject]] å±æ€§æ˜¯ firendã€‚
  friend çš„åŸå‹æ˜¯ personã€‚
  æ‰€ä»¥ super.getGreeting() ç­‰ä»·äº person.getGreeting.call(this)ã€‚
*/
console.log(friend.getGreeting()); // Hello, hi!
```


