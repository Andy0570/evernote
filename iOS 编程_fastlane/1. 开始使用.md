## fastlane ç®€ä»‹

fastlane æ˜¯ä¸€ä¸ªå¼€æºå¹³å°ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒ Android å’Œ iOS åº”ç”¨ç¨‹åºã€‚

fastlane æ˜¯ä¸€æ¬¾ä¸º iOS å’Œ Android å¼€å‘è€…æä¾›çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…å°† App æ‰“åŒ…ã€ç­¾åã€æµ‹è¯•ã€å‘å¸ƒã€ä¿¡æ¯æ•´ç†ã€æäº¤ App Store ç­‰å·¥ä½œå®Œæ•´çš„è¿æ¥èµ·æ¥ï¼Œå®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„å·¥ä½œæµï¼Œå¦‚æœä½¿ç”¨å¾—å½“ï¼Œå¯ä»¥æ˜¾è‘—çš„æé«˜å¼€å‘è€…çš„å¼€å‘æ•ˆç‡ã€‚

ç‰¹æ€§ï¼š
* è‡ªåŠ¨ä¸ºåº”ç”¨å•†åº—ç”Ÿæˆæœ¬åœ°åŒ–çš„å±å¹•æˆªå›¾ï¼›
* è½»æ¾å°† beta ç‰ˆæœ¬åˆ†å‘ç»™æµ‹è¯•äººå‘˜ï¼›
* å‡ ç§’é’Ÿå³å¯å°†æ–°ç‰ˆæœ¬å‘å¸ƒåˆ°åº”ç”¨å•†åº—ï¼›
* å¯é ä¸€è‡´çš„ä»£ç ç­¾åï¼›
* æ”¯æŒæŒç»­é›†æˆï¼ŒFastlane å¯ä»¥æ¯«ä¸è´¹åŠ›åœ°é›†æˆåˆ°ç°æœ‰çš„ CI æœåŠ¡ä¸­ï¼ŒåŒ…æ‹¬ BITRISEã€circleclã€Jenkinsã€Travis CIï¼›


## å¼€å§‹ä¸º iOS åº”ç”¨ä½¿ç”¨ fastlane

### å®‰è£… fastlane

å®‰è£…æœ€æ–°çš„ Xcode å‘½ä»¤è¡Œå·¥å…·ï¼š

```bash
xcode-select --install
```

å®‰è£… fastlaneï¼š

```bash
# ä½¿ç”¨ RubyGems å®‰è£…ï¼š
sudo gem install fastlane -NV

# æˆ–è€…ä½¿ç”¨ Homebrew å®‰è£…ï¼š
brew cask install fastlane
```

### è®¾ç½® fastlane

å°†ç»ˆç«¯è·¯å¾„å¯¼èˆªåˆ°æ‚¨çš„ iOS æˆ– Android é¡¹ç›®ç›®å½•ä¸‹ï¼Œè¿è¡Œï¼š

```bash
fastlane init
```

æ­¤æ—¶ï¼Œfastlane å°†è‡ªåŠ¨æ£€æµ‹æ‚¨çš„é¡¹ç›®ï¼Œå¹¶è¯¢é—®ä»»ä½•é—æ¼çš„ä¿¡æ¯ã€‚

--- 

æˆ‘ä½¿ç”¨ Homebrew å®‰è£…å®Œ fastlane ä¹‹åï¼Œåœ¨ iTerm2 ç»ˆç«¯çš„ zsh ç¯å¢ƒä¸‹æ‰§è¡Œ `fastlane init` ä¼šæç¤ºå‘½ä»¤æ‰¾ä¸åˆ°ï¼Œæç¤ºå¦‚ä¸‹ï¼š

```bash
fastlane init
zsh: command not found: fastlane
```

è§£å†³æ–¹æ¡ˆï¼šå‚è€ƒ [stackoverflow: Fastlane command not found](https://stackoverflow.com/questions/36369197/fastlane-command-not-found)ï¼Œåªè¦æŠŠ fastlane çš„å‘½ä»¤æ‰§è¡Œè·¯å¾„æ·»åŠ åˆ° zsh ç¯å¢ƒä¸‹å°±å¯ä»¥äº†ã€‚

---

å¦‚æœæƒ³è®©ä½ çš„ Fastfile é…ç½®æ–‡ä»¶ä½¿ç”¨ Swift ç¼–å†™ï¼ˆBeta ç‰ˆï¼‰ï¼Œè¿è¡Œï¼š

```bash
fastlane init swift
```

æ ¹æ®æ‚¨é€‰æ‹©çš„è®¾ç½®ç±»å‹ï¼Œfastlane å°†ä¸ºæ‚¨è®¾ç½®ä¸åŒçš„æ–‡ä»¶ã€‚
å¦‚æœæ‚¨é€‰æ‹©ä¸‹è½½ç°æœ‰çš„åº”ç”¨å…ƒæ•°æ®ï¼Œæœ€ç»ˆä¼šå¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„æ–°æ–‡ä»¶å¤¹ï¼š

![](https://docs.fastlane.tools/img/getting-started/ios/fastlane-init.png)

æœ€æœ‰è¶£çš„æ–‡ä»¶æ˜¯ `fastlane/Fastfile` æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†åˆ†å‘åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚


### è®¾ç½®ç¯å¢ƒå˜é‡

fastlane éœ€è¦è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡æ‰èƒ½æ­£ç¡®è¿è¡Œã€‚ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœæ‚¨çš„åŒºåŸŸè®¾ç½®æœªè®¾ç½®ä¸º `UTF-8` è¯­è¨€ç¯å¢ƒï¼Œåˆ™ä¼šå¯¼è‡´æ„å»ºå’Œä¸Šä¼ æ„å»ºæ–‡ä»¶æ—¶å‡ºç°é—®é¢˜ã€‚åœ¨æ‚¨çš„ shell é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼š

```bash
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
```

ä½ å¯ä»¥åœ¨ `ã€œ/.bashrc`ï¼Œ`ã€œ/.bash_profile`ï¼Œ`ã€œ/.profile` æˆ– `ã€œ/.zshrc` æ‰¾åˆ°ä½ çš„ shell é…ç½®æ–‡ä»¶ï¼Œå…·ä½“å–å†³äºä½ çš„ç³»ç»Ÿã€‚


### ä½¿ç”¨ Gemfile

å»ºè®®æ‚¨ä½¿ç”¨ Gemfile æ¥å®šä¹‰å¯¹ fastlane çš„ä¾èµ–ã€‚è¿™å°†æ˜ç¡®å®šä¹‰ä½¿ç”¨çš„ fastlane ç‰ˆæœ¬åŠå…¶ä¾èµ–æ€§ï¼Œå¹¶ä¸”è¿˜å°†åŠ é€Ÿä½¿ç”¨ fastlaneã€‚

ğŸ’¡ å¦‚æœä½ æ˜¯å¤©æœç©å®¶ï¼Œå¼ºçƒˆæ¨èé˜…è¯»ï¼š<https://gems.ruby-china.com/>

```bash
# å¦‚æœèƒ½ç¿»å¢™çš„è¯ï¼Œrubygems çš„ source è¿˜æ˜¯æœ‰å¿…è¦ä¸€å¹¶æ·»åŠ è¿›æ¥ï¼Œå¦åˆ™ fastlane ç‰ˆæœ¬å§‹ç»ˆåœç•™åœ¨ 99 ç‰ˆæœ¬æ— æ³•æ›´æ–°
gem sources --add https://rubygems.org
```

## å‚è€ƒ

* å®˜ç½‘ï¼š[fastlane](https://fastlane.tools/)
* æ–‡æ¡£ï¼š[fastlane docs](https://docs.fastlane.tools/)
* Github æºç ï¼š[fastlane/fastlane](https://github.com/fastlane/fastlane/)


### æ–‡ç« 
* [è’²å…¬è‹±ï¼šä½¿ç”¨ Fastlane ä¸Šä¼  App åˆ°è’²å…¬è‹±](http://www.pgyer.com/doc/view/fastlane)
* [Fastlane for iOS ä»‹ç» 20170319@Microsoft](https://docs.microsoft.com/zh-cn/xamarin/ios/deploy-test/provisioning/fastlane/)
* [ä½¿ç”¨ Fastlane å¯¹ iOS é¡¹ç›®æŒç»­äº¤ä»˜ï¼ˆè‡ªåŠ¨æ‰“åŒ…ï¼‰](https://www.jianshu.com/p/9cdfafc5f7b9)
* [iOS æ•ˆç‡ç¥å™¨ fastlane è‡ªåŠ¨æ‰“åŒ…](https://www.jianshu.com/p/5d836e89d9d1)
* [iOS è‡ªåŠ¨åŒ–æ‰“åŒ…å‘å¸ƒ (fastlane)](https://blog.csdn.net/cdut100/article/details/76381605)
* [iOS å¼€å‘ä¹‹ä½¿ç”¨ JenKins & fastlane å®ç°è‡ªåŠ¨æ‰“åŒ…åŠæŒç»­é›†æˆ](https://sevencho.github.io/archives/56d26041.html)
* [è‡ªåŠ¨åŒ–æ‰“åŒ…ä¹‹ fastlane](https://blog.csdn.net/kuangdacaikuang/article/details/80443515)
* [ä½¿ç”¨ fastlane è‡ªåŠ¨éƒ¨ç½² iOS App](https://zrocky.com/2018/09/fastlane/)
* [ç½‘æ˜“ä¸¥é€‰ã€‘iOS æŒç»­é›†æˆæ‰“åŒ…ï¼ˆJenkins+fastlane+nginxï¼‰](https://blog.csdn.net/w97531/article/details/82787412)


