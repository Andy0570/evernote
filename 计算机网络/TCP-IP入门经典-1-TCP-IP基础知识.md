### 第1章 什么是TCP/IP

TCP/IP 是一类协议系统，它是一套支持网络通信的协议集合。

> 解释：在Internet网络上，不同计算机之间通过网络协议来进行通信，TCP/IP协议就是一套相对完整的网络协议。

TCP/IP及其相关的协议构成了一套在TCP/IP网络中如何处理、传输和接收数据的完整系统，相关协议的系统，例如TCP/IP协议，被称为**协议簇**（protocol suite）。

![](http://upload-images.jianshu.io/upload_images/2648731-2e11bb232a6b76ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

描述：数据传输从一台计算机上的应用程序开始，通过计算机网络硬件，经过传输介质到达正确目的地，然后上传到目的地计算机网络硬件，最后到达负责接收地应用程序。



* TCP/IP标准定义了TCP/IP网络的通信规则。
* TCP/IP实现是一个软件组织，计算机通过它参与到TCP/IP网络中。

> 注意：不是TCP/IP模型提供服务，它只是定义了其应该提供的服务。而真正提供这些服务的则是实现了TCP/IP的厂商软件。

#### TCP/IP标准的目的：确保所有厂商提供的TCP/IP实现都能够很好的兼容。

#### TCP/IP起源：美国国防部的实验性ARPAnet网络。

#### TCP可以在分散的环境中运行的两个特性：

1. 端点验证；
2. 动态路由选择。



### TCP/IP的特性

* **逻辑编址**；（物理地址\MAC地址、逻辑地址\IP地址、网络地址转换系统\NAT、地址解析协议ARP、逆向地址解析协议RARP）

* **路由选择**；

  ![](http://upload-images.jianshu.io/upload_images/2648731-c093b2b5fa05637f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* **名称解析**；（域名系统\DNS、名称解析：域名➡IP地址、域名服务器）

* **错误控制**和**流量控制**；

* **应用支持**；（端口）



#### 标准组织

* Internet架构委员会（IAB）；
* Internet工程任务组（IETF）；
* Internet研究任务组（IRTF）；
* 互联网名称与数字地址分配机构（ICNN）；



#### 官方文档RFC：www.rfc-editor.org



#### 关键术语：

**网络**：计算机或类似计算机的设备之间通过常用的传输介质进行通信的集合。

**网络协议**：对通信过程的的一个具体方面进行的一组通用规则，用来帮助定义复杂数据传输的过程。

**TCP/IP**：在Internet和很多其他网络上使用的网络协议簇。

**ARPANet**：一种实验性网络，也是TCP/IP的诞生地。

**网关**：连接LAN（局域网）到大型网络的路由器。在专属LAN协议当道的时期，术语”网关“有时指执行一些协议转换的路由器。

**局域网（LAN）**：供单个办公室、组织或家庭使用的小型网络，通常只占据一个地理位置。

**物理地址**：与网络硬件相关的地址。在以太网适配器中，物理地址通常在适配器出厂之前分配给它。

**逻辑地址**：通过协议软件配置的网络地址。【域名➡️IP地址➡️逻辑地址➡️网络地址】

**IP地址**：用于定位TCP/IP网络上计算机或其他网络设备的逻辑地址。

**域名**：通过TCP/IP的DNS域名服务系统，与IP地址相关联的名字。

**域名服务**：将网络地址与便于人记忆的名字相关联的一种服务。提供该服务的计算机被称为**域名服务器**，将名字解析为地址的行为被称为**名称解析**。

**端口**：一种内部通道或地址，它在应用程序和TCP/IP传输层之间提供了一个接口。

**专属**：由私有实体（比如一个公司）控制的技术。

**协议实现**：实现了协议标准中定义的通信规则的软件组织。

**RFC**：提供有关TCP/IP或Internet信息的官方技术文档。

**路由器**：通过逻辑地址来转发数据的一种网络设备，并且也可以用来将大型网络分为几个较小的子网。





### 第2章 TCP/IP的工作方式

#### TCP/IP模型&开放系统互连模型（OSI模型）

![](http://upload-images.jianshu.io/upload_images/2648731-f3f7d94ee7309e2f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* **物理层**：把数据转换为传输介质上的电子流或模拟脉冲，并且监视数据的传输。
* **数据链路层**：提供与网络适配器相连的接口，维护子网的逻辑链接。
* **网络层**：支持逻辑寻址与路由选择。
* **传输层**：为网络提供错误控制和数据流控制。
* **会话层**：在计算机的通信应用程序之间建立会话。
* **表示层**：把数据转换为标准格式，管理数据加密与压缩。
* **应用层**：为应用程序提供网络接口，支持文件传输、通信等功能的网络应用。



> ⚠️标准≠实现
>
> TCP/IP的具体实现并没有严格遵守以上两个模型。



#### 数据包

在数据的发送过程中，**从上到下**的流程：

1. 每一层都把相关的信息（报头）捆绑到实际的数据上。

2. 包含**报头信息**和**数据**的数据包作为下一层的**数据**，再次被添加报头信息并重新打包。

   > 下一层的数据 = 上一层的报头信息+数据

![](http://upload-images.jianshu.io/upload_images/2648731-01e88d6bff79ae74.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)





数据包在每一层有不同的形式和名称

| TCP/IP协议栈 | 数据包名称                |
| --------- | -------------------- |
| 应用层       | 消息                   |
| 传输层       | 分段（TCP协议）／数据报（UDP协议） |
| 网际层       | 数据报                  |
| 网络访问层     | 帧                    |

* **消息**：在TCP/IP网络中，消息是从应用层传输到传输层到数据包。该术语通常也用于描述从网络上一个实体传递到另一个实体的信息，它并不总是指应用层数据包。
* **分段**：从传输层的TCP传递到网际层的数据包。
* **数据报**：从网际层传输到网络访问层的数据包，或是从传输层的UDP传递到网际层的数据包。
* **帧**：在网络访问层创建的数据包。



#### 基本的TCP/IP联网系统

TCP/IP协议簇的主要功能是通过几个最重要的协议来完成的。

![](http://upload-images.jianshu.io/upload_images/2648731-201ac5c9567a7506.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

基本流程：

1. 数据从工作于**应用层**的协议、网络服务或应用程序编程接口（API）通过TCP或UDP端口传输到两个**传输层**协议（TCP或UDP）中的一个。程序可以根据需要通过TCP或UDP访问网络。
2. 数据分段传递到**网际层**，**IP协议**在此提供逻辑寻址信息，并且把数据封装为数据报。
3. IP数据报进入**网络访问层**，传递到与物理网络相连接的软件组件。网络访问层创建一个或多个数据帧，从而进入到物理网络。
4. 数据帧呗转化为比特流，通过网络介质进行传输。



#### 关键术语

**地址解析协议（ARP）**：将逻辑IP地址解析为物理地址的协议。

**报头**：在协议栈每一层附加到数据上的协议信息。

**IP**：网际层的协议，提供逻辑寻址和路由选择功能。

**TCP（传输控制协议）**：传输中一个可靠的、面向连接的协议。

**UDP（用户数据报协议）**：传输层中一个不可靠的、无连接的协议。



> THE END.

### 其他阅读
* [你应该知道的计算机网络知识](http://www.jianshu.com/p/21b5cbac0849)
* [从 URL 输入到页面展现到底发生什么？](https://mp.weixin.qq.com/s/zzHDqdU4sdsrs1FXbKYY_w)
