[TOC]

![](https://ws2.sinaimg.cn/large/006tKfTcly1g1kyhbubv3j30jw03fgm3.jpg)

## ä¸€ã€å‘½ä»¤è¡Œå‚æ•°

**å‘½ä»¤è¡Œå‚æ•°**ï¼šåœ¨è¿è¡Œè„šæœ¬æ—¶å‘å‘½ä»¤è¡Œä¸­æ·»åŠ æ•°æ®ã€‚

### `$n` ä½ç½®å‚æ•°

* ä½ç½®å‚æ•°å˜é‡æ˜¯æ ‡å‡†çš„æ•°å­—ï¼š$0 æ˜¯ç¨‹åºåï¼Œ$1 æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2 æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬ä¹ä¸ªå‚æ•° $9ã€‚åœ¨ç¬¬9ä¸ªå˜é‡ä¹‹åï¼Œä½ å¿…é¡»åœ¨å˜é‡æ•°å­—å‘¨å›´åŠ ä¸ŠèŠ±æ‹¬å·ï¼Œæ¯”å¦‚ \${10} ã€‚
* è¾“å…¥å¤šä¸ªå‘½ä»¤è¡Œå‚æ•°æ—¶ï¼Œæ¯ä¸ªå‚æ•°éƒ½å¿…é¡»ç”¨ç©ºæ ¼åˆ†å¼€ã€‚
* å‘½ä»¤è¡Œå‚æ•°å¯ä»¥æ˜¯æ•°å€¼æˆ–æ–‡æœ¬å­—ç¬¦ä¸²ã€‚å¦‚æœå‚æ•°å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¿…é¡»è¦ç”¨å¼•å·ï¼ˆå•å¼•å·æˆ–åŒå¼•å·å‡å¯ï¼‰ã€‚

```shell
#!/bin/bash
# é˜¶ä¹˜è¿ç®—ï¼š1*2*3*...*N

factorial=1
for ((number = 1; number <= $1; number++)); do
	factorial=$(($factorial * $number))
done
echo The factor of $1 is $factorial
```
è¿è¡Œç»“æœï¼š
```shell
$ ./test.sh 5
The factor of 5 is 120
```

### `$0` è¯»å–ç¨‹åºå
å¯ä»¥ç”¨ $0 å‚æ•°è·å– shell åœ¨å‘½ä»¤è¡Œå¯åŠ¨çš„è„šæœ¬åã€‚

```shell
#!/bin/bash
# testing the $0 parameter

# $0ï¼šshell åœ¨å‘½ä»¤è¡Œå¯åŠ¨çš„è„šæœ¬å
echo The command entered is $0

# å½“ä¼ ç»™ $0 å˜é‡çš„çœŸå®å­—ç¬¦ä¸²æ˜¯æ•´ä¸ªè„šæœ¬çš„è·¯å¾„æ—¶ï¼Œç¨‹åºä¸­å°±ä¼šä½¿ç”¨æ•´ä¸ªè·¯å¾„ï¼Œè€Œä¸ä»…ä»…æ˜¯ç¨‹åºåã€‚
# basename å‘½ä»¤ï¼šè¿”å›ä¸åŒ…å«è·¯å¾„çš„è„šæœ¬åã€‚
name=`basename $0`
echo The command entered is $name
```
è¿è¡Œç»“æœï¼š
```shell
$ ./test.sh
The command entered is ./test.sh
The command entered is test.sh
```

### `[ -n "$n" ]` æµ‹è¯•å‚æ•°

> ğŸ’¡ ä½¿ç”¨å‚æ•°å‰ï¼Œå¯¹å‚æ•°è¿›è¡Œéç©ºåˆ¤æ–­ï¼

* åœ¨ä½¿ç”¨å‚æ•°å‰ä¸€å®šè¦æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æ•°æ®ã€‚

```shell
#!/bin/bash
# åœ¨ä½¿ç”¨å‚æ•°å‰ä¸€å®šè¦æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æ•°æ®

# -n æµ‹è¯•æ£€æŸ¥å‘½ä»¤è¡Œå‚æ•° $1 ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼ˆå³å­—ç¬¦ä¸²é•¿åº¦å¤§äº0ï¼‰
if [ -n "$1" ]; then
	echo Hello $1, glad to meet you.
else
	echo "Sorry, you did not identify yourself."
fi
```

### `$#` å‚æ•°ç»Ÿè®¡

* ç»Ÿè®¡å‘½ä»¤è¡Œä¸­è¾“å…¥çš„å‚æ•°ä¸ªæ•°ã€‚
* ç‰¹æ®Šå˜é‡ $# å«æœ‰è„šæœ¬è¿è¡Œæ—¶æºå¸¦çš„å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°ã€‚

```shell
#!/bin/bash
# getting the number of parameters

# $# è¡¨ç¤ºè„šæœ¬è¿è¡Œæ—¶æºå¸¦çš„å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°
echo There were $# parameters supplied

# èŠ±æ‹¬å·é‡Œä¸èƒ½ä½¿ç”¨ç¾å…ƒç¬¦å·ï¼š${$#}
# è§£å†³æ–¹æ³•ä¸€ï¼šå°† $# å˜é‡çš„å€¼ä¼ ç»™å˜é‡åå†ä½¿ç”¨ã€‚
params=$#
echo The last parameter is $params

# è§£å†³æ–¹æ³•äºŒï¼šå°†ç¾å…ƒç¬¦å·æ¢æˆæ„Ÿå¹å·
echo The last parameter is ${!#}
```

> âš ï¸
> å½“å‘½ä»¤è¡Œä¸Šæ²¡æœ‰ä»»ä½•å‚æ•°æ—¶ï¼Œ\$# çš„å€¼ä¸º 0ï¼Œparams å˜é‡çš„å€¼ä¸º 0ï¼Œ${!#} å˜é‡ä¼šè¿”å›å‘½ä»¤è¡Œç”¨åˆ°çš„è„šæœ¬åã€‚

### `$*`ã€`$@` æŠ“å–æ‰€æœ‰çš„æ•°æ®


| å˜é‡å | æè¿° |
| --- | --- |
| $*  | å°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå•è¯ä¿å­˜ã€‚ |
| $@  | å°†å‘½ä»¤è¡Œä¸Šæä¾›çš„æ‰€æœ‰å‚æ•°å½“ä½œåŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯ã€‚|

```shell
#!/bin/bash
# æŠ“å–æ‰€æœ‰æ•°æ®

# $* å˜é‡ä¼šå°†æ‰€æœ‰å‚æ•°å½“æˆå•ä¸ªå‚æ•°
count=1
for param in "$*"; do
	echo "\$* Parameter #$count = $param"
	count=$(($count + 1))
done

# $@ å˜é‡ä¼šå•ç‹¬å¤„ç†æ¯ä¸ªå‚æ•°
count=1
for param in "$@"; do
	echo "\$@ Paramenter #$count = $param"
	count=$(($count + 1))
done
```

å‘½ä»¤è¾“å‡ºï¼š
```shell
$ ./test.sh a b c d
$* Parameter #1 = a b c d
$@ Paramenter #1 = a
$@ Paramenter #2 = b
$@ Paramenter #3 = c
$@ Paramenter #4 = d
```

### `shift` ç§»åŠ¨å˜é‡

åœ¨ä½¿ç”¨ `shift` å‘½ä»¤æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šå°†æ¯ä¸ªå‚æ•°å˜é‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚æ‰€ä»¥ï¼Œå˜é‡ $3 çš„å€¼ä¼šç§»åˆ° $2 ä¸­ï¼Œå˜é‡ $2 çš„å€¼ä¼šç§»åˆ° $1 ä¸­ï¼Œè€Œå˜é‡ $1 çš„å€¼åˆ™ä¼šè¢«åˆ é™¤ã€‚

> ä½¿ç”¨ `shift` å‘½ä»¤çš„æ—¶å€™è¦å°å¿ƒã€‚å¦‚æœæŸä¸ªå‚æ•°è¢«ç§»å‡ºï¼Œå®ƒçš„å€¼å°±è¢«ä¸¢å¼ƒäº†ï¼Œæ— æ³•å†æ¢å¤ã€‚

```shell
#!/bin/bash
# ç§»åŠ¨å˜é‡

# shift é»˜è®¤å°†æ¯ä¸ªå‚æ•°å˜é‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªä½ç½®
count=1
while [ -n "$1" ]
do
	echo "Parameter #$count = $1"
	count=$[ $count+1 ]
	shift
done

echo -e "\n"

# shift n ä¸€æ¬¡æ€§å‘å·¦ç§»åŠ¨ n ä½
echo "The original parameters : $*"
shift 2
echo "Here's the new first parameter: $1"
```

## äºŒã€å‘½ä»¤è¡Œé€‰é¡¹

**å‘½ä»¤è¡Œé€‰é¡¹**ï¼šè·Ÿåœ¨å•ç ´æŠ˜çº¿åé¢çš„å•ä¸ªå­—æ¯ï¼Œå®ƒèƒ½æ”¹å˜å‘½ä»¤çš„è¡Œä¸ºã€‚

### ç”¨ `case` å¤„ç†ç®€å•é€‰é¡¹

```shell
#!/bin/bash
# extracting command line options as parameters

# ç”¨ case è¯­å¥åˆ¤æ–­æŸä¸ªå‚æ•°æ˜¯å¦ä¸ºé€‰é¡¹
while [ -n "$1" ]; do
	case "$1" in
	-a) echo "Found the -a option" ;;
	-b) echo "Found the -b optins" ;;
	-c) echo "Found the -c optins" ;;
	*) echo "$1 is not a valid options" ;;
	esac
	# å‚æ•°å¤„ç†å®Œæˆåï¼Œå‘å·¦ç§»å‡º
	shift
done
```

### `--` åˆ†ç¦»å‚æ•°å’Œé€‰é¡¹

* å½“ç”¨æˆ·åœ¨ä¸€ä¸ªå‘½ä»¤ä¸­åŒæ—¶ä½¿ç”¨å‚æ•°å’Œé€‰é¡¹æ—¶ï¼ŒLinux ä¼šç”¨åŒç ´æŠ˜çº¿ï¼ˆ--ï¼‰æ¥å°†ä¸¤è€…åˆ†å¼€ã€‚
* shell ä¼šç”¨åŒç ´æŠ˜çº¿æ¥è¡¨æ˜é€‰é¡¹åˆ—è¡¨ç»“æŸã€‚åœ¨åŒç ´æŠ˜çº¿ä¹‹åï¼Œè„šæœ¬å°±å¯ä»¥æ”¾å¿ƒåœ°å°†å‰©ä¸‹çš„å‘½ä»¤è¡Œå‚æ•°å½“ä½œå‚æ•°ï¼Œè€Œä¸æ˜¯é€‰é¡¹æ¥å¤„ç†äº†ã€‚


```shell
#!/bin/bash
# extracting options and parameters
# ./test.sh -b test1 -a -d

while [ -n "$1" ]; do
	case "$1" in
	-a) echo "Found the -a option" ;;
	-b) echo "Found the -b option" ;;
	-c) echo "Found the -c option" ;;
	--)
	  # -- è¡¨æ˜å‰©ä¸‹çš„å‘½ä»¤è¡Œå‚æ•°éƒ½æ˜¯é€‰é¡¹ï¼Œ
          # shift å°†åŒç ´æŠ˜çº¿ç§»å‡ºå‚æ•°å˜é‡ã€‚
          # break è·³å‡ºå¾ªç¯ã€‚
          shift
          break
          ;;
	*) echo "$1 is not an option" ;;
	esac
	# å‚æ•°å¤„ç†å®Œæˆåï¼Œå‘å·¦ç§»å‡º
	shift
done

count=1
for param in $@; do
	echo "Parameter #$count: $param"
	count=$(($count + 1))
done
```

### å¤„ç†å¸¦å€¼çš„é€‰é¡¹

è¯­æ³•ï¼š`command -a value1 -b value2`

```shell
#!/bin/bash
# extracting command line options and values

while [ -n "$1" ]; do
	case "$1" in
	-a) echo "Found the -a option" ;;
	-b)
		param="$2"
		echo "Found the -b option, with parameter value $param"
		shift
		;;
	-c) echo "Found the -c option" ;;
	--)
		shift
		break
		;;
	*) echo "$1 is not an option" ;;
	esac
	shift
done

count=1
for param in "$@"; do
	echo "Parameter #$count : $param"
	count=$(($count + 1))
done
```

### `getopt` å¤„ç†åˆå¹¶é€‰é¡¹

`getopt` å‘½ä»¤å¯ä»¥æ¥å—ä¸€ç³»åˆ—ä»»æ„å½¢å¼çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬è½¬æ¢æˆé€‚å½“çš„æ ¼å¼ã€‚

å‘½ä»¤æ ¼å¼ï¼š`getopt optstring parameters`

* é¦–å…ˆï¼Œåœ¨ optstring ä¸­åˆ—å‡ºä½ è¦åœ¨è„šæœ¬ä¸­ç”¨åˆ°çš„æ¯ä¸ªå‘½ä»¤è¡Œé€‰é¡¹å­—æ¯ã€‚
* ç„¶åï¼Œåœ¨æ¯ä¸ªéœ€è¦å‚æ•°å€¼çš„é€‰é¡¹å­—æ¯ååŠ ä¸€ä¸ªå†’å·ã€‚
* `getopt` å‘½ä»¤ä¼šåŸºäºä½ å®šä¹‰çš„ optstring è§£ææä¾›çš„å‚æ•°ã€‚ 

```shell
$ getopt ab:cd -a -b test1 -cd test2 test3
 -a -b test1 -c -d -- test2 test3
```

å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªä¸åœ¨ optstring ä¸­çš„é€‰é¡¹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ`getopt` å‘½ä»¤ä¼šäº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚
å¯ä»¥åœ¨å‘½ä»¤ååŠ  -q é€‰é¡¹å¿½ç•¥é”™è¯¯æ¶ˆæ¯ï¼š
```shell
$ getopt ab:cd -a -b test1 -cde test2 test3
getopt: illegal option -- e
 -a -b test1 -c -d -- test2 test3
 
$ getopt -q ab:cd -a -b test1 -cde test2 test3
 -- ab:cd -a -b test1 -cde test2 test3
```

#### åœ¨è„šæœ¬ä¸­ä½¿ç”¨ `getopt` å‘½ä»¤ä»¥æ ¼å¼åŒ–è¾“å…¥

åœ¨è„šæœ¬ä¸­ä½¿ç”¨ `getopt` æ¥æ ¼å¼åŒ–è„šæœ¬æ‰€æºå¸¦çš„ä»»ä½•å‘½ä»¤è¡Œé€‰é¡¹æˆ–å‚æ•°ã€‚

æ–¹æ³•æ˜¯ç”¨ `getopt` å‘½ä»¤ç”Ÿæˆçš„æ ¼å¼åŒ–åçš„ç‰ˆæœ¬æ¥æ›¿æ¢å·²æœ‰çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ã€‚ç”¨ `set` å‘½ä»¤èƒ½å¤Ÿåšåˆ°ã€‚

> `set` å‘½ä»¤æ ¼å¼ï¼š`set -- $(getopt -q ab:cd "$@")`
> ä½œç”¨ï¼š
> å°†ã€Œå‘½ä»¤è¡Œå‚æ•°ã€æ›¿æ¢æˆ ã€Œ`set` å‘½ä»¤çš„å‘½ä»¤è¡Œå€¼ã€ã€‚ç„¶åï¼Œå°†åŸå§‹è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°ä¼ ç»™ `getopt` å‘½ä»¤ï¼Œä¹‹åå†å°† `getopt` å‘½ä»¤çš„è¾“å‡ºä¼ ç»™ `set` å‘½ä»¤ï¼Œç”¨ `getopt` æ ¼å¼åŒ–åçš„å‘½ä»¤è¡Œå‚æ•°æ¥æ›¿æ¢åŸå§‹çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œ

> âš ï¸
> `getopt` å‘½ä»¤å¹¶ä¸æ“…é•¿å¤„ç†å¸¦ç©ºæ ¼å’Œå¼•å·çš„å‚æ•°å€¼ã€‚å®ƒä¼šå°†ç©ºæ ¼å½“ä½œå‚æ•°åˆ†éš”ç¬¦ï¼Œè€Œä¸æ˜¯æ ¹æ®åŒå¼•å·å°†äºŒè€…å½“ä½œä¸€ä¸ªå‚æ•°ã€‚

```shell
#!/bin/bash
# extracting command line options and values with getopt
# getopt å‘½ä»¤å¯ä»¥æ¥å—ä¸€ç³»åˆ—ä»»æ„å½¢å¼çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°ï¼Œå¹¶è‡ªåŠ¨å°†å®ƒä»¬è½¬æ¢æˆé€‚å½“çš„æ ¼å¼ã€‚
# getopt command is not goot at dealing with space, we can use getopts

set -- $(getopt -q ab:c "$@")
while [ -n "$1" ]; do
	case "$1" in
	-a) echo "Found the -a option" ;;
	-b)
		param="$2"
		echo "Found the -b option,with parameter value $param"
		shift
		;;
	-c) echo "Found the -c option" ;;
	--)
		shift
		break
		;;
	*) echo "$1 is not an option" ;;
	esac
	shift
done

count=1
for param in "$@"; do
	echo "Parameter #$count: $param"
	count=$(($count + 1))
done

```


### æ›´é«˜çº§çš„ `getopts`

ä¸ `getopt` ä¸åŒï¼Œå‰è€…å°†å‘½ä»¤è¡Œä¸Šé€‰é¡¹å’Œå‚æ•°å¤„ç†ååªç”Ÿæˆä¸€ä¸ªè¾“å‡ºï¼Œè€Œ `getopts` å‘½ä»¤èƒ½å¤Ÿå’Œå·²æœ‰çš„shellå‚æ•°å˜é‡é…åˆé»˜å¥‘ã€‚

getopts çš„å‘½ä»¤æ ¼å¼ï¼š`getopts optstring variable`

* æœ‰æ•ˆçš„é€‰é¡¹å­—æ¯éƒ½ä¼šåˆ—åœ¨ optstring ä¸­ï¼Œå¦‚æœé€‰é¡¹å­—æ¯è¦æ±‚æœ‰ä¸ªå‚æ•°å€¼ï¼Œå°±åŠ ä¸€ä¸ªå†’å·ã€‚è¦å»æ‰é”™è¯¯æ¶ˆæ¯çš„è¯ï¼Œå¯ä»¥åœ¨ optstring ä¹‹å‰åŠ ä¸€ä¸ªå†’å·ã€‚`getopts` å‘½ä»¤å°†å½“å‰å‚æ•°ä¿å­˜åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰çš„ variable ä¸­ã€‚
* `getopts` å‘½ä»¤ä¼šç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼š
    * **OPTARG** ç¯å¢ƒå˜é‡ä¿å­˜å½“å‰é€‰é¡¹å¯¹åº”çš„å‚æ•°å€¼ã€‚
    * **OPTIND** ç¯å¢ƒå˜é‡ä¿å­˜å‚æ•°åˆ—è¡¨ä¸­ `getopts` æ­£åœ¨å¤„ç†çš„å‚æ•°ä½ã€‚

```shell
#!/bin/bash
# simple demonstration of the getopts command

while getopts :ab:c opt
do
	case "$opt" in
	a) echo "Found the -a option";;
	b) echo "Found the -b option, with value $OPTARG";;
	c) echo "Found the -c option";;
	*) echo "Unknown option:$opt";;
	esac
done
```

`getopts` å‘½ä»¤è§£æå‘½ä»¤è¡Œé€‰é¡¹æ—¶ä¼šç§»é™¤å¼€å¤´çš„å•ç ´æŠ˜çº¿ï¼Œæ‰€ä»¥åœ¨ `case` å®šä¹‰ä¸­ä¸ç”¨å•ç ´æŠ˜çº¿ã€‚
```shell
$ ./test.sh -ab test1 -c
Found the -a option
Found the -b option, with value test1
Found the -c option
```

`getopts` å‘½ä»¤å…è®¸ä½ åœ¨å‚æ•°å€¼ä¸­åŒ…å«ç©ºæ ¼ï¼š
```shell
$ ./test.sh -b "test1 test2" -a
Found the -b option, with value test1 test2
Found the -a option
```

ä½ å¯ä»¥å°†é€‰é¡¹å­—æ¯å’Œå‚æ•°å€¼æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸ç”¨åŠ ç©ºæ ¼ï¼š
```shell
$ ./test.sh -abtest1
Found the -a option
Found the -b option, with value test1
```

`getopts` å‘½ä»¤èƒ½å¤Ÿå°†å‘½ä»¤è¡Œä¸Šæ‰¾åˆ°çš„æ‰€æœ‰æœªå®šä¹‰çš„é€‰é¡¹ç»Ÿä¸€è¾“å‡ºæˆé—®å·ï¼š
```shell
$ ./test.sh -ab test1 -cde
Found the -a option
Found the -b option, with value test1
Found the -c option
Unknown option:?
Unknown option:?
```

`getopts` å‘½ä»¤çŸ¥é“ä½•æ—¶åœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‚æ•°ç•™ç»™ä½ å¤„ç†ã€‚åœ¨ `getopts` å¤„ç†æ¯ä¸ªé€‰é¡¹æ—¶ï¼Œå®ƒä¼šå°†**OPTIND** ç¯å¢ƒå˜é‡å€¼å¢ä¸€ã€‚åœ¨ `getopts` å®Œæˆå¤„ç†æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ `shift` å‘½ä»¤å’Œ **OPTIND** å€¼æ¥ç§»åŠ¨å‚æ•°ã€‚
```shell
#!/bin/bash
# processing options and parameters with getopts

while getopts :ab:cd opt; do
	case "$opt" in
	a) echo "Found the -a option" ;;
	b) echo "Found the -b option,with value $OPTARG" ;;
	c) echo "Found the -c option" ;;
	d) echo "Found the -d option" ;;
	*) echo "Unknown option: $opt" ;;
	esac
done

# ç§»å‡ºä¹‹å‰è¾“å‡ºçš„é€‰é¡¹å’Œå‚æ•°
shift $(($OPTIND - 1))

count=1
for param in "$@"; do
	echo "Parameter $count: $param"
	count=$(($count + 1))
done
```
å‘½ä»¤è¾“å‡ºï¼š

```shell
$ ./test.sh -a -b test1 -c test2 test3 test4
Found the -a option
Found the -b option,with value test1
Found the -c option
Parameter 1: test2
Parameter 2: test3
Parameter 3: test4
```

### å°†é€‰é¡¹æ ‡å‡†åŒ–

åœ¨åˆ›å»ºshellè„šæœ¬æ—¶ï¼Œæ˜¾ç„¶å¯ä»¥æ§åˆ¶å…·ä½“æ€ä¹ˆåšã€‚ä½ å®Œå…¨å¯ä»¥å†³å®šç”¨å“ªäº›å­—æ¯é€‰é¡¹ä»¥åŠå®ƒä»¬çš„ç”¨æ³•ã€‚

ä½†æœ‰äº›å­—æ¯é€‰é¡¹åœ¨ Linux ä¸–ç•Œé‡Œå·²ç»æ‹¥æœ‰äº†æŸç§ç¨‹åº¦çš„æ ‡å‡†å«ä¹‰ã€‚å¦‚æœä½ èƒ½åœ¨shellè„šæœ¬ä¸­æ”¯æŒè¿™äº›é€‰é¡¹ï¼Œè„šæœ¬çœ‹èµ·æ¥èƒ½æ›´å‹å¥½ä¸€äº›ã€‚

å¸¸ç”¨çš„ Linux å‘½ä»¤é€‰é¡¹ | æè¿°
 --- | ---
-a | æ˜¾ç¤ºæ‰€æœ‰å¯¹è±¡
-c | ç”Ÿæˆä¸€ä¸ªè®¡æ•°
-d | æŒ‡å®šä¸€ä¸ªç›®å½•
-e | æ‰©å±•ä¸€ä¸ªå¯¹è±¡
-f | æŒ‡å®šè¯»å…¥æ•°æ®çš„æ–‡ä»¶
-h | æ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯
-i | å¿½ç•¥æ–‡æœ¬å¤§å°å†™
-l | äº§ç”Ÿè¾“å‡ºçš„é•¿æ ¼å¼ç‰ˆæœ¬
-n | ä½¿ç”¨éäº¤äº’æ¨¡å¼ï¼ˆæ‰¹å¤„ç†ï¼‰
-o | å°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°çš„æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶
-q | ä»¥å®‰é™æ¨¡å¼è¿è¡Œ
-r | é€’å½’åœ°å¤„ç†ç›®å½•å’Œæ–‡ä»¶
-s | ä»¥å®‰é™æ¨¡å¼è¿è¡Œ
-v | ç”Ÿæˆè¯¦ç»†è¾“å‡º
-x | æ’é™¤æŸä¸ªå¯¹è±¡
-y | å¯¹æ‰€æœ‰é—®é¢˜å›ç­”yes


## ä¸‰ã€ä»é”®ç›˜è¯»å–è¾“å…¥


### `read` ä»é”®ç›˜æˆ–æ–‡ä»¶æè¿°ç¬¦ä¸­æ¥å—è¾“å…¥

```shell
#!/bin/bash
# testing the reading command

# -n æ‰“å°ä¸å¸¦å°¾æ¢è¡Œç¬¦çš„æ¶ˆæ¯
echo -n "Enter your name:"
read name
echo "Hello $name, welcome to my program"

# -p æŒ‡å®šæç¤ºç¬¦
read -p "Please enter your age: " age
days=$(($age * 365))
echo "That makes you over $days days old"

# æŒ‡å®šå¤šä¸ªå˜é‡ï¼Œè¾“å…¥çš„æ¯ä¸ªæ•°æ®å€¼éƒ½ä¼šåˆ†é…ç»™è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå˜é‡ï¼Œå¦‚æœç”¨å®Œäº†ï¼Œå°±å…¨åˆ†é…ç»™æœ€åä¸€ä¸ªå˜é‡
read -p "Please enter name:" first last
echo "Checking data for $last. $first..."

# å¦‚æœä¸æŒ‡å®šå˜é‡ï¼Œread å‘½ä»¤å°±ä¼šæŠŠå®ƒæ”¶åˆ°çš„ä»»ä½•æ•°æ®éƒ½æ”¾åˆ°ç‰¹æ®Šç¯å¢ƒå˜é‡REPLYä¸­
read -p "Enter a number:"
factorial=1
for ((count = 1; count <= $REPLY; count++)); do
	factorial=$(($factorial * $count))
done
echo "The factorial of $REPLY is $factorial"
```

### `read -t n` è®¾ç½®è¾“å…¥è¶…æ—¶

-t é€‰é¡¹æŒ‡å®šäº† `read` å‘½ä»¤ç­‰å¾…è¾“å…¥çš„ç§’æ•°ã€‚å½“è®¡æ—¶å™¨è¿‡æœŸåï¼Œ`read` å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªéé›¶é€€å‡ºçŠ¶æ€ç ã€‚

ä¹Ÿå¯ä»¥ä¸å¯¹è¾“å…¥è¿‡ç¨‹è®¡æ—¶ï¼Œè€Œæ˜¯è®© `read` å‘½ä»¤æ¥ç»Ÿè®¡è¾“å…¥çš„å­—ç¬¦æ•°ã€‚å½“è¾“å…¥çš„å­—ç¬¦è¾¾åˆ°é¢„è®¾çš„å­—ç¬¦æ•°æ—¶ï¼Œå°±è‡ªåŠ¨é€€å‡ºï¼Œå°†è¾“å…¥çš„æ•°æ®èµ‹ç»™å˜é‡ã€‚

```shell
#!/bin/bash
# timing the data entry

# -t é€‰é¡¹æŒ‡å®š read å‘½ä»¤ç­‰å¾…è¾“å…¥çš„ç§’æ•°
if read -t 5 -p "Please enter your name:" name; then
	echo "Hello, $name, welcome to my script"
else
	# èµ·åˆ°æ¢è¡Œçš„ä½œç”¨
	echo
	# è¾“å…¥è®¡æ•° -n1
	read -n1 -p "Do you want to continue [Y/N]?" answer
	case $answer in
	Y | y)
		echo
		echo "Fine, continue on..."
		;;
	N | n)
		echo
		echo "OKï¼Œgoodbye"
		;;
	*)
		echo
		echo "OK, wrong, goodbye"
		;;
	esac
	echo "Sorry, this is the end of the script"
fi
```

### `read -s` éšè—æ–¹å¼è¯»å–

-s é€‰é¡¹å¯ä»¥é¿å…åœ¨ `read` å‘½ä»¤ä¸­è¾“å…¥çš„æ•°æ®å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šï¼ˆå®é™…ä¸Šï¼Œæ•°æ®ä¼šè¢«æ˜¾ç¤ºï¼Œåªæ˜¯ `read` å‘½ä»¤ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾æˆè·ŸèƒŒæ™¯è‰²ä¸€æ ·ï¼‰ã€‚

```shell
#!/bin/bash
# hiding input data from monitor

read -s -p "Please enter your password: " pass
echo
echo "Is your password really $pass?"
```

### ä»æ–‡ä»¶ä¸­è¯»å–

ç”¨ `read` å‘½ä»¤æ¥è¯»å–Linuxç³»ç»Ÿä¸Šæ–‡ä»¶é‡Œä¿å­˜çš„æ•°æ®ã€‚æ¯æ¬¡è°ƒç”¨ `read` å‘½ä»¤ï¼Œå®ƒéƒ½ä¼šä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ã€‚å½“æ–‡ä»¶ä¸­å†æ²¡æœ‰å†…å®¹æ—¶ï¼Œ`read` å‘½ä»¤ä¼šé€€å‡ºå¹¶è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç ã€‚

å®ç°æ–¹å¼ï¼šå¯¹æ–‡ä»¶ä½¿ç”¨ `cat` å‘½ä»¤ï¼Œå°†ç»“æœé€šè¿‡ç®¡é“ä¼ é€’ç»™å«æœ‰ `read` å‘½ä»¤çš„ `while` å‘½ä»¤ã€‚

```shell
#!/bin/bash
# ç”¨ read å‘½ä»¤è¯»å– Linux ç³»ç»Ÿæ–‡ä»¶ä¸­çš„æ•°æ®

count=1
# å¯¹æ–‡ä»¶ä½¿ç”¨ cat å‘½ä»¤ï¼Œå°†ç»“æœé€šè¿‡ç®¡é“ä¼ é€’ç»™å«æœ‰ read å‘½ä»¤çš„ while å‘½ä»¤ã€‚
cat test | while read line; do
	echo "Line $count: $line"
	count=$(($count + 1))
done
echo "Finished processing the file"
```