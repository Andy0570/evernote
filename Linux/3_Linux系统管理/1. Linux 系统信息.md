[TOC]

## å‚è€ƒ
* [Linuxå…¥é—¨æ•™ç¨‹](http://wiki.jikexueyuan.com/project/linux/)
* [Gitbookï¼šThe Linux Command Line ä¸­æ–‡ç‰ˆ](https://billie66.gitbooks.io/tlcl-cn/content/chap00/introduction.html)
* [Gitbookï¼šé¸Ÿå“¥çš„ Linux ç§æˆ¿èœï¼šåŸºç¡€å­¦ä¹ ç¯‡ ç¬¬å››ç‰ˆ](https://wizardforcel.gitbooks.io/vbird-linux-basic-4e/content/)
* [æŸ¥è¯¢ï¼šLinux å‘½ä»¤å¤§å…¨](http://man.linuxde.net/)
* [ç½‘ç»œå¸¸è§çš„ 9 ä¸ªå‘½ä»¤](http://blog.sina.com.cn/s/blog_672b409101012vpo.html)
* [13 æ¬¾ Linux è¿ç»´æ¯”è¾ƒå®ç”¨çš„å·¥å…·](https://blog.csdn.net/jb19900111/article/details/17756183)
* [20 ä¸ª Unix/Linux å‘½ä»¤æŠ€å·§](https://blog.csdn.net/chenleixing/article/details/44569827)
* [Linux å‘½ä»¤æ€»ç»“](https://blog.csdn.net/qwe6112071/article/details/50806734)
* [Linux æ€ç»´å¯¼å›¾æ•´ç†](https://www.jianshu.com/p/59f759207862)
* [Linux æœåŠ¡å™¨ç¨‹åºè§„èŒƒ](https://blog.csdn.net/dextrad_ihacker/article/details/51930998)
* [æ¯å¤©ä¸€ä¸ª linux å‘½ä»¤ç›®å½•](https://www.cnblogs.com/peida/archive/2012/12/05/2803591.html)
* [Bash è„šæœ¬ 15 åˆ†é’Ÿè¿›é˜¶æ•™ç¨‹](https://linux.cn/article-2921-1.html)
* [linux shell é€»è¾‘è¿ç®—ç¬¦ã€é€»è¾‘è¡¨è¾¾å¼è¯¦è§£](https://www.cnblogs.com/chengmo/archive/2010/10/01/1839942.html)

![Linux å‘½ä»¤é€ŸæŸ¥è¡¨](https://upload-images.jianshu.io/upload_images/2648731-2c9d2ef99d3a67f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## ä¸€ã€ç³»ç»Ÿ

### `uname` æ˜¾ç¤ºæ“ä½œç³»ç»Ÿç›¸å…³ä¿¡æ¯
```
$ uname -o
GNU/Linux
```


| å¸¸ç”¨å‘½ä»¤ | è¯´æ˜ |
| --- | --- |
| uname -a | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿå…¨éƒ¨ä¿¡æ¯ |
| uname -m | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿ CPU ç±»å‹ |
| uname -n | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿä¸»æœºåç§° |
| uname -s | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿç±»å‹ |
| uname -r | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ |

ç¤ºä¾‹ï¼š
```bash
# uname -a
Linux clumsiest 4.4.0-1075-aws #85-Ubuntu SMP Thu Jan 17 17:15:12 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux

# uname -m
x86_64

# uname -n
clumsiest

# uname -s
Linux

# uname -r
4.15.0-52-generic
```

### æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬

```bash
# æŸ¥çœ‹ Ubuntu ç³»ç»Ÿç‰ˆæœ¬å·
$ cat /etc/issue
$ cat /etc/os-release
...

# æŸ¥çœ‹ Ubuntu ç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯
$ sudo lsb_release -a
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04.5 LTS
Release:	16.04
Codename:	xenial
```

### æŸ¥çœ‹ç³»ç»Ÿè¯­è¨€è®¾ç½®

```bash
echo $LANG
en_US.UTF-8
```

### `date` æ˜¾ç¤ºç³»ç»Ÿå½“å‰çš„æ—¶é—´å’Œæ—¥æœŸ
```bash
$ date
Wed Jan  9 08:41:43 UTC 2019
```

### `cal` æ˜¾ç¤ºå½“å‰æœˆä»½çš„æ—¥å†
```shell
$ cal
    January 2019
Su Mo Tu We Th Fr Sa
       1  2  3  4  5
 6  7  8  9 10 11 12
13 14 15 16 17 18 19
20 21 22 23 24 25 26
27 28 29 30 31
```

### `exit` ç»“æŸç»ˆç«¯ä¼šè¯
åŒï¼šCtrl+D
```shell
$ exit
```

### `lspci` æŸ¥çœ‹ç³»ç»Ÿ PCI è®¾å¤‡

`lspci` å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰çš„ PCI è®¾å¤‡ï¼Œæ¯”å¦‚ä¸»æ¿ã€å£°å¡ã€æ˜¾å¡å’Œç½‘å¡ç­‰ã€‚

```shell
$ lspci
# é›†æˆä¸»æ¿è®¾å¤‡ç±»å‹ï¼šIntel Corporation 440FX - 82441FX
00:00.0 Host bridge: Intel Corporation 440FX - 82441FX PMC [Natoma] (rev 02)
00:01.0 ISA bridge: Intel Corporation 82371SB PIIX3 ISA [Natoma/Triton II]
00:01.1 IDE interface: Intel Corporation 82371SB PIIX3 IDE [Natoma/Triton II]
00:01.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 01)
# VGA æ˜¾å¡è®¾å¤‡
00:02.0 VGA compatible controller: Cirrus Logic GD 5446
00:03.0 Unassigned class [ff80]: XenSource, Inc. Xen Platform Device (rev 01)
```


## äºŒã€CPU
æŸ¥çœ‹ CPU ä¿¡æ¯ï¼š
```bash
$ cat /proc/cpuinfo # æŸ¥çœ‹ CPU
processor	: 0            # é€»è¾‘å¤„ç†å™¨å”¯ä¸€æ ‡è¯†ç¬¦
vendor_id	: GenuineIntel # å¤„ç†å™¨ç±»å‹
cpu family	: 6
model		: 63
model name	: Intel(R) Xeon(R) CPU E5-2676 v3 @ 2.40GHz
stepping	: 2
microcode	: 0x3c
cpu MHz		: 2400.062
cache size	: 30720 KB
physical id	: 0 # ç‰©ç†å”¯ä¸€æ ‡è¯†ç¬¦
siblings	: 1 # ä½äºç›¸åŒç‰©ç†å°è£…ä¸­çš„é€»è¾‘å¤„ç†å™¨çš„æ•°é‡
core id		: 0 # æ¯ä¸ªå†…æ ¸çš„å”¯ä¸€æ ‡è¯†ç¬¦
cpu cores	: 1 # ä½äºç›¸åŒç‰©ç†å°è£…ä¸­çš„å†…æ ¸æ•°é‡
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good nopl xtopology eagerfpu pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm invpcid_single kaiser fsgsbase bmi1 avx2 smep bmi2 erms invpcid xsaveopt
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 4800.12
clflush size	: 64
cache_alignment	: 64
address sizes	: 46 bits physical, 48 bits virtual
power management:
```

> ğŸ’¡ğŸ’¡ğŸ’¡
> åœ¨ siblings å’Œ cpu cores å€¼ä¹‹é—´æœ‰ä¸ªå¯¹åº”å…³ç³»ï¼Œ
> * å¦‚æœ siblings æ˜¯ cpu cores çš„ä¸¤å€ï¼Œåˆ™è¯´æ˜ç³»ç»Ÿæ”¯æŒè¶…çº¿ç¨‹ï¼Œå¹¶ä¸”è¶…çº¿ç¨‹å·²æ‰“å¼€ï¼›
> * å¦‚æœ siblings å’Œ cpu cores ä¸€è‡´ï¼Œåˆ™è¯´æ˜ç³»ç»Ÿä¸æ”¯æŒè¶…çº¿ç¨‹ï¼Œæˆ–è€…è¶…çº¿ç¨‹æœªæ‰“å¼€ã€‚

æŸ¥çœ‹ CPU å•ä¸ªä¿¡æ¯
```
# æŸ¥çœ‹ç³»ç»Ÿç‰©ç† CPU çš„ä¸ªæ•°
$ cat /proc/cpuinfo | grep "physical id" | sort | uniq | wc -l
1

# æŸ¥çœ‹æ¯ä¸ªç‰©ç† CPU ä¸­å†…æ ¸çš„ä¸ªæ•°ï¼š
$ cat /proc/cpuinfo | grep "cpu cores"
cpu cores	: 4
cpu cores	: 4
cpu cores	: 4
cpu cores	: 4

# æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰é€»è¾‘ CPU çš„ä¸ªæ•°ï¼ˆæ‰€æœ‰ç‰©ç† CPU ä¸­å†…æ ¸çš„ä¸ªæ•°åŠ ä¸Šè¶…çº¿ç¨‹ä¸ªæ•°ï¼‰
$ cat /proc/cpuinfo | grep "processor" | wc -l
4
```
æ­¤ç³»ç»Ÿæœ‰ 1 ä¸ªç‰©ç† CPUï¼Œæ¯ä¸ªç‰©ç† CPU ä¸­æœ‰ 4 ä¸ªå†…æ ¸ï¼Œæ²¡æœ‰å¯ç”¨è¶…çº¿ç¨‹ã€‚æ€»å…±æœ‰ 4 ä¸ªé€»è¾‘ CPUã€‚



## ä¸‰ã€å†…å­˜
æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä¿¡æ¯ï¼š
```shell
$ less /proc/meminfo
MemTotal:       16431296 kB   # ç³»ç»Ÿçš„ç‰©ç†å†…å­˜å¤§çº¦ 16 G
MemFree:        15609916 kB   # ç©ºé—²å†…å­˜å¤§çº¦ 15.6 G
MemAvailable:   15948816 kB   # å¯ç”¨ç‰©ç†å†…å­˜å¤§çº¦ 16 G
Buffers:           92508 kB   # ç¼“å†²åŒºå†…å­˜å æ® 92508 kB
Cached:           484924 kB   # ç¼“å­˜å ç”¨äº† 494924 kB
...
```


### `free` æ˜¾ç¤ºç³»ç»Ÿå†…å­˜çŠ¶æ€
```shell
$ free
              total        used        free      shared  buff/cache   available
Mem:        1014500      717980       82392       11356      214128       99704

$ free -m # æŸ¥çœ‹å†…å­˜ä¿¡æ¯ï¼Œä»¥ MB ä¸ºå•ä½æ˜¾ç¤º
              total        used        free      shared  buff/cache   available
Mem:            990         664          85          11         240         130
Swap:             0           0           0
```

## å››ã€ç£ç›˜

### `fdisk -l` æŸ¥çœ‹ç£ç›˜åˆ†åŒºä¿¡æ¯



### `df` æŸ¥çœ‹ç£ç›˜å‰©ä½™ç©ºé—´çš„æ•°é‡
```shell
$ df
Filesystem     1K-blocks    Used Available Use% Mounted on
udev              499260       0    499260   0% /dev
tmpfs             101452   11204     90248  12% /run
/dev/xvda1       8065444 5823432   2225628  73% /
tmpfs             507248     128    507120   1% /dev/shm
tmpfs               5120       0      5120   0% /run/lock
tmpfs             507248       0    507248   0% /sys/fs/cgroup
/dev/loop4         16768   16768         0 100% /snap/amazon-ssm-agent/734
tmpfs             101452       0    101452   0% /run/user/1000
/dev/loop0         16896   16896         0 100% /snap/amazon-ssm-agent/784
/dev/loop2         90368   90368         0 100% /snap/core/5897
/dev/loop5         18432   18432         0 100% /snap/amazon-ssm-agent/930
/dev/loop3         91648   91648         0 100% /snap/core/6034
/dev/loop6         91648   91648         0 100% /snap/core/6130
```

## äº”ã€ç½‘ç»œ

### `ifconfig` æŸ¥çœ‹è™šæ‹Ÿæœºç½‘ç»œæ¥å£ï¼š
```bash
ifconfig
```

### æŸ¥çœ‹ linux ä¸­æŸä¸ªç«¯å£ï¼ˆportï¼‰æ˜¯å¦è¢«å ç”¨
#### æ–¹æ³•ä¸€ï¼š`lsof -i:PortNumber`
```
$ lsof -i :443
COMMAND  PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
nginx   1278     root    8u  IPv4  13114      0t0  TCP *:https (LISTEN)
nginx   1278     root    9u  IPv6  13115      0t0  TCP *:https (LISTEN)
nginx   1279 www-data    8u  IPv4  13114      0t0  TCP *:https (LISTEN)
nginx   1279 www-data    9u  IPv6  13115      0t0  TCP *:https (LISTEN)
nginx   1280 www-data    8u  IPv4  13114      0t0  TCP *:https (LISTEN)
nginx   1280 www-data    9u  IPv6  13115      0t0  TCP *:https (LISTEN)
nginx   1281 www-data    8u  IPv4  13114      0t0  TCP *:https (LISTEN)
nginx   1281 www-data    9u  IPv6  13115      0t0  TCP *:https (LISTEN)
nginx   1282 www-data    8u  IPv4  13114      0t0  TCP *:https (LISTEN)
nginx   1282 www-data    9u  IPv6  13115      0t0  TCP *:https (LISTEN)
```

#### æ–¹æ³•äºŒï¼š`netstat`

æŸ¥çœ‹ 80 ç«¯å£ï¼š
```
$ netstat -anp|grep 80
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      1278/nginx -g daemo
tcp6       0      0 :::80                   :::*                    LISTEN      1278/nginx -g daemo
udp        0      0 0.0.0.0:68              0.0.0.0:*                           804/dhclient
unix  2      [ ]         DGRAM                    11949    804/dhclient
unix  2      [ ]         DGRAM                    14126    1180/iscsid
```

æŸ¥çœ‹ 443 ç«¯å£ï¼š
```
$ netstat -anp|grep 443
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      1278/nginx -g daemo
tcp6       0      0 :::443                  :::*                    LISTEN      1278/nginx -g daemo
```

å‚è€ƒï¼š[æŸ¥çœ‹ linux ä¸­æŸä¸ªç«¯å£ï¼ˆportï¼‰æ˜¯å¦è¢«å ç”¨](https://blog.csdn.net/hsd2012/article/details/51384907)


## å…­ã€è¿›ç¨‹

### `ps` æŠ¥å‘Šå½“å‰è¿›ç¨‹å¿«ç…§
è™½ç„¶ `ps` å‘½ä»¤èƒ½å¤Ÿå±•ç¤ºè®¸å¤šè®¡ç®—æœºè¿è¡ŒçŠ¶æ€çš„ä¿¡æ¯ï¼Œä½†æ˜¯å®ƒåªæ˜¯æä¾› `ps` å‘½ä»¤æ‰§è¡Œæ—¶åˆ»çš„æœºå™¨çŠ¶æ€çš„å¿«ç…§ã€‚
```shell
# 1âƒ£ï¸ é»˜è®¤æƒ…å†µä¸‹ï¼Œps ä¸ä¼šæ˜¾ç¤ºå¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œåªåˆ—å‡ºä¸å½“å‰ç»ˆç«¯ä¼šè¯ç›¸å…³è¿›ç¨‹ã€‚
$ ps
  PID TTY          TIME CMD
 6650 pts/0    00:00:00 bash
 6995 pts/0    00:00:00 ps
 
# 2âƒ£ï¸ å±•ç¤ºæ‰€æœ‰è¿›ç¨‹
$ ps x
  PID TTY      STAT   TIME COMMAND
    1 ?        Ss     0:28 /lib/systemd/systemd --system --deserialize 20
    2 ?        S      0:00 [kthreadd]
    3 ?        S      0:13 [ksoftirqd/0]
    5 ?        S<     0:00 [kworker/0:0H]
  ...
```
* TTY æ˜¯ "Teletype" çš„ç®€å†™ï¼Œæ˜¯æŒ‡è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ï¼Œåœ¨ TTY ä¸€æ ä¸­å‡ºç°çš„ "?" ï¼Œè¡¨ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ã€‚
* TIME å­—æ®µè¡¨ç¤ºè¿›ç¨‹æ‰€æ¶ˆè€—çš„ CPU æ—¶é—´æ•°é‡ã€‚
* STAT æ˜¯ "state" çš„ç®€å†™ï¼Œè¡¨ç¤ºè¿›ç¨‹å½“å‰çŠ¶æ€ã€‚


| è¿›ç¨‹çŠ¶æ€ï¼ˆSTATï¼‰ | å«ä¹‰ |
| --- | --- |
| R | è¿è¡Œã€‚è¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–å‡†å¤‡è¿è¡Œã€‚ |
| S | æ­£åœ¨ç¡çœ ã€‚è¿›ç¨‹æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯ï¼Œæ­£åœ¨ç­‰å¾…ä¸€ä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚è¯´ï¼Œä¸€ä¸ªæŒ‰é”®æˆ–è€…ç½‘ç»œæ•°æ®åŒ…ã€‚ |
| D | ä¸å¯ä¸­æ–­ç¡çœ ã€‚è¿›ç¨‹æ­£åœ¨ç­‰å¾… I/Oï¼Œæ¯”æ–¹è¯´ï¼Œä¸€ä¸ªç£ç›˜é©±åŠ¨å™¨çš„ I/Oã€‚ |
| T | å·²åœæ­¢. å·²ç»æŒ‡ç¤ºè¿›ç¨‹åœæ­¢è¿è¡Œã€‚ |
| Z | ä¸€ä¸ªæ­»è¿›ç¨‹æˆ– â€œåƒµå°¸â€ è¿›ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å­è¿›ç¨‹ï¼Œä½†æ˜¯å®ƒçš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰æ¸…ç©ºå®ƒã€‚ï¼ˆçˆ¶è¿›ç¨‹æ²¡æœ‰æŠŠå­è¿›ç¨‹ä»è¿›ç¨‹è¡¨ä¸­åˆ é™¤ï¼‰ |
| < | ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹ã€‚è¿™å¯èƒ½ä¼šæˆäºˆä¸€ä¸ªè¿›ç¨‹æ›´å¤šé‡è¦çš„èµ„æºï¼Œç»™å®ƒæ›´å¤šçš„ CPU æ—¶é—´ã€‚è¿›ç¨‹çš„è¿™ç§å±æ€§å«åš nicenessã€‚å…·æœ‰é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹æ®è¯´æ˜¯ä¸å¥½çš„ï¼ˆless niceï¼‰ï¼Œå› ä¸ºå®ƒå ç”¨äº†æ¯”è¾ƒå¤šçš„ CPU æ—¶é—´ï¼Œè¿™æ ·å°±ç»™å…¶å®ƒè¿›ç¨‹ç•™ä¸‹å¾ˆå°‘æ—¶é—´ã€‚ |
| N | ä½ä¼˜å…ˆçº§è¿›ç¨‹ã€‚ä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹ï¼ˆä¸€ä¸ª â€œå¥½â€ è¿›ç¨‹ï¼‰åªæœ‰å½“å…¶å®ƒé«˜ä¼˜å…ˆçº§è¿›ç¨‹æ‰§è¡Œä¹‹åï¼Œæ‰ä¼šå¾—åˆ°å¤„ç†å™¨æ—¶é—´ã€‚ |

```shell
# 3âƒ£ï¸ æ˜¾ç¤ºè¿›ç¨‹è¯¦ç»†ä¿¡æ¯ï¼ˆ ä»¥BSD é£æ ¼è¾“å‡ºï¼‰
$ ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0 119840  6072 ?        Ss    2018   0:28 /lib/systemd/systemd --system --deserialize 20
root         2  0.0  0.0      0     0 ?        S     2018   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S     2018   0:13 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S<    2018   0:00 [kworker/0:0H]
...

# 4âƒ£ï¸ åœ¨è¿›ç¨‹åˆ—è¡¨ä¸­æœç´¢ init è¿›ç¨‹
$ ps aux | grep init
root      9948  0.0  0.0  14192   924 pts/0    S+   11:08   0:00 grep --color=auto init

# æ˜¾ç¤º node.js è¿›ç¨‹
$ ps aux | grep node

# 5âƒ£ï¸ å¯ä»¥æ˜¾ç¤ºè¿›ç¨‹çˆ¶è¿›ç¨‹IDï¼ˆPPIDï¼‰å’Œè°¦è®©åº¦ï¼ˆNIï¼‰
$ ps lax
F   UID   PID  PPID PRI  NI    VSZ   RSS WCHAN  STAT TTY        TIME COMMAND
4     0     1     0  20   0 119840  6072 ep_pol Ss   ?          0:28 /lib/systemd/systemd --system --deserialize 20
1     0     2     0  20   0      0     0 kthrea S    ?          0:00 [kthreadd]
1     0     3     2  20   0      0     0 smpboo S    ?          0:13 [ksoftirqd/0]
1     0     5     2   0 -20      0     0 worker S<   ?          0:00 [kworker/0:0H]
```
BSD é£æ ¼çš„ ps å‘½ä»¤åˆ—è¡¨ï¼š
| æ ‡é¢˜ | å«ä¹‰ |
| --- | --- |
| USER | ç”¨æˆ·IDï¼Œè¿›ç¨‹çš„æ‰€æœ‰è€…ã€‚ |
| %CPU | ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„ CPU ä½¿ç”¨ç‡ã€‚ |
| %MEM | ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„å†…å­˜ä½¿ç”¨ç‡ã€‚ |
| VSZ | è™šæ‹Ÿå†…å­˜å¤§å°ã€‚ |
| RSS | è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½ã€‚ |
| START | è¿›ç¨‹è¿è¡Œçš„èµ·å§‹æ—¶é—´ã€‚è‹¥è¶…è¿‡ 24 å°æ—¶ï¼Œåˆ™ç”¨å¤©è¡¨ç¤ºã€‚ |


### `top` åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹
* `top` ç¨‹åºè¿ç»­æ˜¾ç¤ºç³»ç»Ÿè¿›ç¨‹æ›´æ–°çš„ä¿¡æ¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ 5s æ›´æ–°ä¸€æ¬¡ï¼‰ã€‚
* `top` æ˜¾ç¤ºç»“æœç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šæœ€ä¸Šé¢æ˜¯ç³»ç»Ÿæ¦‚è¦ï¼Œä¸‹é¢æ˜¯è¿›ç¨‹åˆ—è¡¨ï¼Œä»¥ CPU çš„ä½¿ç”¨ç‡æ’åºã€‚


```
$ top
top - 18:01:00 up 88 days,  1:19,  1 user,  load average: 0.00, 0.00, 0.00
Tasks: 156 total,   1 running, 155 sleeping,   0 stopped,   0 zombie
%Cpu(s):  0.0 us,  0.1 sy,  0.0 ni, 99.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem :  8174524 total,  1836288 free,  2201156 used,  4137080 buff/cache
KiB Swap:        0 total,        0 free,        0 used.  5553516 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND
 2087 root      20   0 2842252 1.493g  29056 S   0.3 19.2   5261:51 mongod
    1 root      20   0  119840   6072   4088 S   0.0  0.1   0:28.09 systemd
 ...
 
###########################################
è¿›ç¨‹åˆ—è¡¨ç›‘æ§ä¿¡æ¯å­—æ®µå«ä¹‰ï¼š

PID â€” è¿›ç¨‹ id
USER â€” è¿›ç¨‹æ‰€æœ‰è€…
PR â€” è¿›ç¨‹ä¼˜å…ˆçº§
NI â€” nice å€¼ã€‚è´Ÿå€¼è¡¨ç¤ºé«˜ä¼˜å…ˆçº§ï¼Œæ­£å€¼è¡¨ç¤ºä½ä¼˜å…ˆçº§
VIRT â€” è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡ï¼Œå•ä½ kbã€‚VIRT=SWAP+RES
RES â€” è¿›ç¨‹ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå•ä½ kbã€‚RES=CODE+DATA
SHR â€” å…±äº«å†…å­˜å¤§å°ï¼Œå•ä½ kb
S â€” è¿›ç¨‹çŠ¶æ€ã€‚D = ä¸å¯ä¸­æ–­çš„ç¡çœ çŠ¶æ€ R = è¿è¡Œ S = ç¡çœ  T = è·Ÿè¸ª / åœæ­¢ Z = åƒµå°¸è¿›ç¨‹
%CPU â€” ä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„ CPU æ—¶é—´å ç”¨ç™¾åˆ†æ¯”
%MEM â€” è¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”
TIME+ â€” è¿›ç¨‹ä½¿ç”¨çš„ CPU æ—¶é—´æ€»è®¡ï¼Œå•ä½ 1/100 ç§’
COMMAND â€” è¿›ç¨‹åç§°ï¼ˆå‘½ä»¤å / å‘½ä»¤è¡Œï¼‰
###########################################
```

å…¶ä¸­ç³»ç»Ÿæ¦‚è¦åŒ…å«è®¸å¤šæœ‰ç”¨ä¿¡æ¯ã€‚ä¸‹è¡¨æ˜¯å¯¹ç³»ç»Ÿæ¦‚è¦çš„è¯´æ˜ï¼š

| è¡Œå· | å­—æ®µ | å«ä¹‰ |
| --- | --- | --- |
| 1 | top | ç¨‹åºåã€‚ |
|  | 18:01:00 | å½“å‰ç³»ç»Ÿæ—¶é—´ã€‚ |
|  | up 88 days,  1:19 | è¿™æ˜¯æ­£å¸¸è¿è¡Œæ—¶é—´ã€‚å®ƒæ˜¯è®¡ç®—æœºä»ä¸Šæ¬¡å¯åŠ¨åˆ°ç°åœ¨æ‰€è¿è¡Œçš„æ—¶é—´ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œç³»ç»Ÿå·²ç»è¿è¡Œäº†88å¤©1å°æ—¶19åˆ†é’Ÿã€‚ |
|  | 1 user | æœ‰ä¸€ä¸ªç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚ |
|  | load average: | åŠ è½½å¹³å‡å€¼ï¼ˆç³»ç»Ÿè´Ÿè½½ï¼‰ï¼Œç­‰å¾…è¿è¡Œçš„è¿›ç¨‹æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹ä¸ªæ•°ï¼Œè¿™äº›è¿›ç¨‹å…±äº« CPUã€‚å±•ç¤ºäº†ä¸‰ä¸ªæ•°å€¼ï¼Œæ¯ä¸ªæ•°å€¼å¯¹åº”ä¸åŒçš„æ—¶é—´å‘¨æœŸã€‚ç¬¬ä¸€ä¸ªæ˜¯æœ€å 60 ç§’çš„å¹³å‡å€¼ï¼Œ ä¸‹ä¸€ä¸ªæ˜¯å‰ 5 åˆ†é’Ÿçš„å¹³å‡å€¼ï¼Œæœ€åä¸€ä¸ªæ˜¯å‰ 15 åˆ†é’Ÿçš„å¹³å‡å€¼ã€‚è‹¥å¹³å‡å€¼ä½äº 1.0ï¼Œåˆ™æŒ‡ç¤ºè®¡ç®—æœºå·¥ä½œä¸å¿™ç¢Œã€‚ |
| 2 | Tasks | æ€»ç»“äº†è¿›ç¨‹æ•°ç›®å’Œå„ç§è¿›ç¨‹çŠ¶æ€ã€‚ |
| 3 | %Cpu(s) | è¿™ä¸€è¡Œæè¿°äº† CPU æ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹çš„ç‰¹æ€§ã€‚ |
|  | 0.0 us | ç”¨æˆ·ç©ºé—´å ç”¨ CPU çš„ç™¾åˆ†æ¯”ã€‚ |
|  | 0.1 sy | 0.1% çš„ CPU æ—¶é—´è¢«ç”¨äºç³»ç»Ÿï¼ˆå†…æ ¸ï¼‰è¿›ç¨‹ã€‚ |
|  | 0.0 ni | æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨ CPU çš„ç™¾åˆ†æ¯” |
|  | 99.9 id | 99.9% çš„ CPU æ—¶é—´æ˜¯ç©ºé—²çš„ã€‚ |
|  | 0.0 wa | 0.0% çš„ CPU æ—¶é—´æ¥ç­‰å¾… I/Oã€‚ |
|  | hi | ç¡¬ä¸­æ–­ï¼ˆHardware IRQï¼‰å ç”¨ CPU çš„ç™¾åˆ†æ¯” |
|  | si | è½¯ä¸­æ–­ï¼ˆSoftware Interruptsï¼‰å ç”¨ CPU çš„ç™¾åˆ†æ¯” |
| 4 | Mem | å±•ç¤ºç‰©ç†å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚ |
| 5 | Swap | å±•ç¤ºäº¤æ¢åˆ†åŒºï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚ |
`top` ç¨‹åºæ¥å—ä¸€ç³»åˆ—ä»é”®ç›˜è¾“å…¥çš„å‘½ä»¤ã€‚ä¸¤ä¸ªæœ€æœ‰è¶£çš„å‘½ä»¤æ˜¯ h å’Œ qã€‚
* hï¼Œæ˜¾ç¤ºç¨‹åºçš„å¸®åŠ©å±å¹•ã€‚
* qï¼Œé€€å‡º `top` ç¨‹åºã€‚

### `uptime` è¾“å‡ºç³»ç»Ÿä»»åŠ¡é˜Ÿåˆ—ä¿¡æ¯

è¾“å‡ºå½“å‰ç³»ç»Ÿæ—¶é—´ã€ç³»ç»Ÿå¼€æœºåˆ°ç°åœ¨çš„è¿è¡Œæ—¶é—´ã€ç›®å‰å¤šå°‘ç”¨æˆ·åœ¨çº¿ã€ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ç­‰ã€‚
```
$ uptime
 08:52:56 up 1 day,  1:44,  1 user,  load average: 0.00, 0.00, 0.00
```

## ä¸ƒã€ç³»ç»Ÿå…³æœº

### `shutdown` å…³æœºæˆ–é‡å¯ç³»ç»Ÿ


ğŸ’¡ å…³æœºå‰ï¼Œä½¿ç”¨ `sync` å‘½ä»¤ï¼Œå°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚

| shutdown å‘½ä»¤                                             | å«ä¹‰                               |
| --------------------------------------------------------- | ---------------------------------- |
| shutdown -h 10 'This server will shutdown after 10 mins!' | å‘Šè¯‰ç™»å½•ç”¨æˆ·ï¼Œç³»ç»Ÿå°†åœ¨10åˆ†é’Ÿåå…³æœº |
| shutdown -h now                                           | ç³»ç»Ÿç«‹é©¬å…³æœºï¼Œhalt                 |
| shutdown -h +10                                           | ç³»ç»Ÿ10åˆ†é’Ÿåå…³æœº                   |
| shutdown -h 20:25                                         | ç³»ç»Ÿä¼šåœ¨ä»Šæ™š 20:25 å…³æœº            |
| shutdown -r now                                           | ç³»ç»Ÿç«‹é©¬é‡å¯                       |
| shutdown -r +10                                           | ç³»ç»Ÿ10åˆ†é’Ÿåé‡å¯                   |

### `reboot` é‡å¯æŒ‡ä»¤ï¼Œç­‰åŒäº`shutdown -r now`

### `halt` å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäº `shutdown -h now` å’Œ `poweroff`